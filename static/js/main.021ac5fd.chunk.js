(this.webpackJsonpsbdprojecttool=this.webpackJsonpsbdprojecttool||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(14),r=n.n(c),i=(n(49),n(8)),s=n.n(i),l=n(22),p=n(16),u=n(5),d=n(6),f=n(7),h=n(44),j=n(4),g=n(17),b=n.p+"static/media/SBD_Yellow_Primary.146ba792.png",v=(n(51),n(18)),m=n(42),O=n.n(m),y=n(43),w=n(1),S="SBDProjectTool (adamgf@gmail.com)",x=[12921371,12964335,12964336,12998921,13325954,20877820,36329995,36330029,36330129,36331086,36492685,36533990,36540113,36540202],P=[12964335,36329995,36330129],k={option:function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(j.a)({borderBottom:"1px dotted yellow",color:t.isSelected?"blue":"yellow",padding:20,backgroundColor:"#808080"},"color","#ffffff"))},control:function(){return{width:"100%",border:"1px dotted yellow"}},singleValue:function(e,t){var n=t.isDisabled?.5:1;return Object(g.a)(Object(g.a)({},e),{},{opacity:n,transition:"opacity 300ms"})}},A=[],C=[];function J(){if(this.props.item.isSelected){var e=this.props.item.tags[0].value,t=A.indexOf(e);1===A.length?A=[]:-1!==t&&A.splice(t,1),alert(this.props.item.caption+" has been removed!"),this.props.item.isSelected=!1}else{var n=this.props.item.tags[0].value;A.push(n),alert(this.props.item.caption+" has been added!"),this.props.item.isSelected=!0}}function N(e,t){var n=t.action;if("select-option"===n)C.push(t.option.value);else if("clear"===n)C=[];else if("remove-value"===n){var a=C.indexOf(t.removedValue.value);1===C.length?C=[]:-1!==a&&C.splice(t.removedValue.value,a)}else alert("Unrecognized action: "+n+" sent to handleProjectChange().")}var T=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(p.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){var t=a.state.peoplethumbnails;if(e&&e.length>0){var n=t.concat(e);n.sort((function(e,t){return e.tags[0].value>t.tags[0].value?1:-1})),a.setState({peoplethumbnails:n})}},n=function(e){var t=a.state.projects;if(e&&e.length>0){var n=t.concat(e);a.setState({projects:n})}},v.OAuth.initialize("HbYXKGPIU3ilvj5XZmgy7PKvUGg"),v.OAuth.popup("basecamp",{cache:!0,headers:{"User-Agent":S,"Content-Type":"application/json"}}).done((function(e){e.me().done((function(a){for(var o=a.id,c=a.raw.accounts,r=0;r<c.length;r++)if("Stanley Black & Decker"===c[r].name){o=c[r].id;break}var i=function(){var e=Object(p.a)(s.a.mark((function e(n){var a,c,r,i,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],c=0,r=Object(l.a)(x);try{for(p=function(){var e=i.value,r=JSON.parse(window.localStorage.getItem("person_".concat(e)));null!==r?(a.push(r),(c+=1)===x.length&&t(a)):n.get("https://3.basecampapi.com/".concat(o,"/people/").concat(e,".json"),{headers:{"User-Agent":S,"Content-Type":"application/json"}}).done((function(n){var o=-1!==P.indexOf(n.id);o&&A.push(n.id);var r={src:n.avatar_url,thumbnail:n.avatar_url,thumbnailWidth:64,thumbnailHeight:64,isSelected:o,caption:n.name,tags:[{value:n.id,title:n.name}]};window.localStorage.setItem("person_".concat(e),JSON.stringify(r)),a.push(r),(c+=1)===x.length&&t(a)})).fail((function(n){(c+=1)===x.length&&t(a),alert("Failed to get person with id: "+e+" err: "+JSON.stringify(n))}))},r.s();!(i=r.n()).done;)p()}catch(s){r.e(s)}finally{r.f()}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i(e);var u=function(){var t=Object(p.a)(s.a.mark((function t(a,c){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.get("https://3.basecampapi.com/".concat(o,"/projects.json?page=").concat(c),{cache:!0,headers:{"User-Agent":S,"Content-Type":"application/json"}}).done((function(t){var a,o=[],r=Object(l.a)(t);try{for(r.s();!(a=r.n()).done;){var i=a.value,s={value:i.id,label:i.name};o.push(s)}}catch(p){r.e(p)}finally{r.f()}o.length>0?(window.localStorage.setItem("projects_".concat(c),JSON.stringify(o)),n(o),u(e,c+1)):window.localStorage.setItem("projects_".concat(c),JSON.stringify([]))})).fail((function(e){var t=JSON.parse(window.localStorage.getItem("projects_".concat(c)));null!=t?t.length>0&&(n(t),u(a,c+1)):alert("Failed to get projects for page: "+c+" err: "+JSON.stringify(e))}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();u(e,1)}))})).fail((function(e){alert("OAuth failed with err: "+JSON.stringify(e))}));case 4:case"end":return e.stop()}}),e)}))),a.putPeopleToProject=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===A.length||0===C.length?alert("Please select at least one person and one project."):(v.OAuth.initialize("HbYXKGPIU3ilvj5XZmgy7PKvUGg"),v.OAuth.popup("basecamp",{cache:!0,headers:{"User-Agent":S,"Content-Type":"application/json"}}).done((function(e){e.me().done((function(t){for(var n=t.id,a=t.raw.accounts,o=0;o<a.length;o++)if("Stanley Black & Decker"===a[o].name){n=a[o].id;break}var c,r='{ "grant" : ['.concat(A,'], "revoke" : [] }'),i=Object(l.a)(C);try{var s=function(){var t=c.value;e.put("https://3.basecampapi.com/".concat(n,"/projects/").concat(t,"/people/users.json"),{headers:{"User-Agent":S,"Content-Type":"application/json"},data:r}).done((function(e){alert("Success granting users: "+JSON.stringify(e))})).fail((function(e){alert("Failed to grant users: "+JSON.stringify(A)+" for project: "+t+" err: "+JSON.stringify(e))}))};for(i.s();!(c=i.n()).done;)s()}catch(p){i.e(p)}finally{i.f()}}))})).fail((function(e){alert("OAuth failed with err: "+JSON.stringify(e))})));case 1:case"end":return e.stop()}}),e)}))),a.state={peoplethumbnails:[],projects:[]},a}return Object(d.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)("body",{className:"App-header",children:[Object(w.jsxs)("div",{style:{align:"left"},children:[Object(w.jsx)("img",{src:b,alt:"logo",width:"293.88888888888",height:"46"})," Add People to Project Tool (",Object(w.jsx)("i",{children:"invite only"}),")"]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{}),"All People:",Object(w.jsx)("div",{children:Object(w.jsx)(O.a,{images:this.state.peoplethumbnails,onClickThumbnail:J})})]}),Object(w.jsx)("p",{}),Object(w.jsxs)("div",{children:["All Projects:",Object(w.jsx)("div",{children:Object(w.jsx)(y.a,{id:"projectselector",options:this.state.projects,isMulti:!0,onChange:N,styles:k})})]}),Object(w.jsx)("p",{}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:this.putPeopleToProject,style:{fontSize:"48px",height:"80px",width:"65%",backgroundColor:"#808080",color:"#ffffff"},children:"Add People to Projects"})}),Object(w.jsx)("p",{}),Object(w.jsx)("p",{})]})})}}]),n}(o.a.Component),U=T,I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))};r.a.render(Object(w.jsx)(o.a.StrictMode,{children:Object(w.jsx)(U,{})}),document.getElementById("root")),I()},49:function(e,t,n){},51:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.021ac5fd.chunk.js.map