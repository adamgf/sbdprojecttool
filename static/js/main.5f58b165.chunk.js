(this.webpackJsonpsbdprojecttool=this.webpackJsonpsbdprojecttool||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),i=(n(49),n(8)),s=n.n(i),l=n(22),p=n(16),u=n(5),d=n(6),f=n(7),h=n(44),j=n(4),g=n(17),b=n.p+"static/media/SBD_Yellow_Primary.146ba792.png",v=(n(51),n(18)),m=n(42),O=n.n(m),y=n(43),x=n(1),w="SBDProjectTool (adamgf@gmail.com)",S=[12921371,12964335,12964336,12998921,13325954,20877820,36329995,36330029,36330129,36331086,36492685,36533990,36540113,36540202],P=[12964335,36329995,36330129],k={option:function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(j.a)({borderBottom:"1px dotted yellow",color:t.isSelected?"blue":"yellow",padding:20,backgroundColor:"#808080"},"color","#ffffff"))},control:function(){return{width:"100%",border:"1px dotted yellow"}},singleValue:function(e,t){var n=t.isDisabled?.5:1;return Object(g.a)(Object(g.a)({},e),{},{opacity:n,transition:"opacity 300ms"})}},A=[],C=[];function J(){if(this.props.item.isSelected){var e=this.props.item.tags[0].value,t=A.indexOf(e);1===A.length?A=[]:-1!==t&&A.splice(t,1),alert(this.props.item.caption+" has been removed!"),this.props.item.isSelected=!1}else{var n=this.props.item.tags[0].value;A.push(n),alert(this.props.item.caption+" has been added!"),this.props.item.isSelected=!0}}function N(e,t){var n=t.action;if("select-option"===n)C.push(t.option.value);else if("clear"===n)C=[];else if("remove-value"===n){var a=C.indexOf(t.removedValue.value);1===C.length?C=[]:-1!==a&&C.splice(t.removedValue.value,a)}else alert("Unrecognized action: "+n+" sent to handleProjectChange().")}var T=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(p.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){var t=a.state.peoplethumbnails;if(e&&e.length>0){var n=t.concat(e);n.sort((function(e,t){return e.tags[0].value>t.tags[0].value?1:-1})),a.setState({peoplethumbnails:n})}},n=function(e){var t=a.state.projects;if(e&&e.length>0){var n=t.concat(e);a.setState({projects:n})}},v.OAuth.initialize("HbYXKGPIU3ilvj5XZmgy7PKvUGg"),v.OAuth.popup("basecamp",{cache:!0,headers:{"User-Agent":w,"Content-Type":"application/json"}}).done((function(e){e.me().done((function(a){for(var o=a.id,r=a.raw.accounts,c=0;c<r.length;c++)if("Stanley Black & Decker"===r[c].name){o=r[c].id;break}var i=function(){var e=Object(p.a)(s.a.mark((function e(n){var a,r,c,i,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=0,c=Object(l.a)(S);try{for(p=function(){var e=i.value,c=JSON.parse(window.localStorage.getItem("person_".concat(e)));null!==c?(a.push(c),(r+=1)===S.length&&t(a)):n.get("https://3.basecampapi.com/".concat(o,"/people/").concat(e,".json"),{headers:{"User-Agent":w,"Content-Type":"application/json"}}).done((function(n){var o=-1!==P.indexOf(n.id);o&&A.push(n.id);var c={src:n.avatar_url,thumbnail:n.avatar_url,thumbnailWidth:64,thumbnailHeight:64,isSelected:o,caption:n.name,tags:[{value:n.id,title:n.name}]};window.localStorage.setItem("person_".concat(e),JSON.stringify(c)),a.push(c),(r+=1)===S.length&&t(a)})).fail((function(n){(r+=1)===S.length&&t(a),alert("Failed to get person with id: "+e+" err: "+JSON.stringify(n))}))},c.s();!(i=c.n()).done;)p()}catch(s){c.e(s)}finally{c.f()}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i(e);var u=function(){var t=Object(p.a)(s.a.mark((function t(a,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:JSON.parse(window.localStorage.getItem("projects_".concat(r))),a.get("https://3.basecampapi.com/".concat(o,"/projects.json?page=").concat(r),{cache:!0,headers:{"User-Agent":w,"Content-Type":"application/json"}}).done((function(t){var a,o=[],c=Object(l.a)(t);try{for(c.s();!(a=c.n()).done;){var i=a.value,s={value:i.id,label:i.name};o.push(s)}}catch(p){c.e(p)}finally{c.f()}o.length>0&&(n(o),u(e,r+1))})).fail((function(e){alert("Failed to get projects for page: "+r+" err: "+JSON.stringify(e))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();u(e,1)}))})).fail((function(e){alert("OAuth failed with err: "+JSON.stringify(e))}));case 4:case"end":return e.stop()}}),e)}))),a.putPeopleToProject=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===A.length||0===C.length?alert("Please select at least one person and one project."):(v.OAuth.initialize("HbYXKGPIU3ilvj5XZmgy7PKvUGg"),v.OAuth.popup("basecamp",{cache:!0,headers:{"User-Agent":w,"Content-Type":"application/json"}}).done((function(e){e.me().done((function(t){for(var n=t.id,a=t.raw.accounts,o=0;o<a.length;o++)if("Stanley Black & Decker"===a[o].name){n=a[o].id;break}var r,c='{ "grant" : ['.concat(A,'], "revoke" : [] }'),i=Object(l.a)(C);try{var s=function(){var t=r.value;e.put("https://3.basecampapi.com/".concat(n,"/projects/").concat(t,"/people/users.json"),{headers:{"User-Agent":w,"Content-Type":"application/json"},data:c}).done((function(e){alert("Success granting users: "+JSON.stringify(e))})).fail((function(e){alert("Failed to grant users: "+JSON.stringify(A)+" for project: "+t+" err: "+JSON.stringify(e))}))};for(i.s();!(r=i.n()).done;)s()}catch(p){i.e(p)}finally{i.f()}}))})).fail((function(e){alert("OAuth failed with err: "+JSON.stringify(e))})));case 1:case"end":return e.stop()}}),e)}))),a.state={peoplethumbnails:[],projects:[]},a}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("body",{className:"App-header",children:[Object(x.jsxs)("div",{style:{align:"left"},children:[Object(x.jsx)("img",{src:b,alt:"logo",width:"293.88888888888",height:"46"})," Add People to Project Tool (",Object(x.jsx)("i",{children:"invite only"}),")"]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{}),"All People:",Object(x.jsx)("div",{children:Object(x.jsx)(O.a,{images:this.state.peoplethumbnails,onClickThumbnail:J})})]}),Object(x.jsx)("p",{}),Object(x.jsxs)("div",{children:["All Projects:",Object(x.jsx)("div",{children:Object(x.jsx)(y.a,{id:"projectselector",options:this.state.projects,isMulti:!0,onChange:N,styles:k})})]}),Object(x.jsx)("p",{}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:this.putPeopleToProject,style:{fontSize:"48px",height:"80px",width:"65%",backgroundColor:"#808080",color:"#ffffff"},children:"Add People to Projects"})}),Object(x.jsx)("p",{}),Object(x.jsx)("p",{})]})})}}]),n}(o.a.Component),U=T,B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)}))};c.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(U,{})}),document.getElementById("root")),B()},49:function(e,t,n){},51:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.5f58b165.chunk.js.map