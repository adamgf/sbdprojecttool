(this.webpackJsonpsbdprojecttool=this.webpackJsonpsbdprojecttool||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(14),r=n.n(i),c=(n(49),n(8)),s=n.n(c),l=n(22),p=n(16),u=n(5),f=n(6),d=n(7),h=n(44),j=n(4),b=n(17),v=n.p+"static/media/SBD_Yellow_Primary.146ba792.png",g=(n(51),n(18)),m=n(42),O=n.n(m),y=n(43),x=n(1),w=[12921371,12964335,12964336,12998921,13325954,20877820,36329995,36330029,36330129,36331086,36492685,36533990,36540113,36540202],S=[12964335,36329995,36330129],P={option:function(e,t){return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({borderBottom:"1px dotted yellow",color:t.isSelected?"blue":"yellow",padding:20,backgroundColor:"#808080"},"color","#ffffff"))},control:function(){return{width:"100%",border:"1px dotted yellow"}},singleValue:function(e,t){var n=t.isDisabled?.5:1;return Object(b.a)(Object(b.a)({},e),{},{opacity:n,transition:"opacity 300ms"})}},k=[],A=[];function C(){if(this.props.item.isSelected){var e=this.props.item.tags[0].value,t=k.indexOf(e);1===k.length?k=[]:-1!==t&&k.splice(t,1),alert(this.props.item.caption+" has been removed!"),this.props.item.isSelected=!1}else{var n=this.props.item.tags[0].value;k.push(n),alert(this.props.item.caption+" has been added!"),this.props.item.isSelected=!0}}function J(e,t){var n=t.action;if("select-option"===n)A.push(t.option.value);else if("clear"===n)A=[];else if("remove-value"===n){var a=A.indexOf(t.removedValue.value);1===A.length?A=[]:-1!==a&&A.splice(t.removedValue.value,a)}else alert("Unrecognized action: "+n+" sent to handleProjectChange().")}var N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(p.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){var t=a.state.peoplethumbnails;if(alert("about to set peoplethumbnails 1: "+e.length+" : "+t.length),e&&e.length>0){var n=t.concat(e);n.sort((function(e,t){return e.tags[0].value>t.tags[0].value?1:-1})),alert("about to set peoplethumbnails "+n.length),a.setState({peoplethumbnails:n})}},n=function(e){var t=a.state.projects;if(e&&e.length>0){var n=t.concat(e);a.setState({projects:n})}},g.OAuth.initialize("HbYXKGPIU3ilvj5XZmgy7PKvUGg"),g.OAuth.popup("basecamp").done((function(e){e.me().done((function(a){for(var o=a.id,i=a.raw.accounts,r=0;r<i.length;r++)if("Stanley Black & Decker"===i[r].name){o=i[r].id;break}var c=function(){var e=Object(p.a)(s.a.mark((function e(n){var a,i,r,c,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=0,r=Object(l.a)(w);try{for(p=function(){var e=c.value;n.get("https://3.basecampapi.com/".concat(o,"/people/").concat(e,".json")).done((function(e){var n=-1!==S.indexOf(e.id);n&&k.push(e.id);var o={src:e.avatar_url,thumbnail:e.avatar_url,thumbnailWidth:64,thumbnailHeight:64,isSelected:n,caption:e.name,tags:[{value:e.id,title:e.name}]};a.push(o),(i+=1)===w.length&&t(a)})).fail((function(n){(i+=1)===w.length&&t(a),alert("Failed to get person with id: "+e+" err: "+JSON.stringify(n))}))},r.s();!(c=r.n()).done;)p()}catch(s){r.e(s)}finally{r.f()}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();c(e);var u=function(){var t=Object(p.a)(s.a.mark((function t(a,i){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.get("https://3.basecampapi.com/".concat(o,"/projects.json?page=").concat(i)).done((function(t){var a,o=[],r=Object(l.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value,s={value:c.id,label:c.name};o.push(s)}}catch(p){r.e(p)}finally{r.f()}o.length>0&&(n(o),u(e,i+1))})).fail((function(e){alert("Failed to get projects: "+JSON.stringify(e))}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();u(e,1)}))})).fail((function(e){alert("OAuth failed with err: "+JSON.stringify(e))}));case 4:case"end":return e.stop()}}),e)}))),a.putPeopleToProject=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===k.length||0===A.length?alert("Please select at least one person and one project."):(g.OAuth.initialize("HbYXKGPIU3ilvj5XZmgy7PKvUGg"),g.OAuth.popup("basecamp").done((function(e){e.me().done((function(t){for(var n=t.id,a=t.raw.accounts,o=0;o<a.length;o++)if("Stanley Black & Decker"===a[o].name){n=a[o].id;break}var i,r='{ "grant" : ['.concat(k,'], "revoke" : [] }'),c=Object(l.a)(A);try{var s=function(){var t=i.value;e.put("https://3.basecampapi.com/".concat(n,"/projects/").concat(t,"/people/users.json"),{headers:{"Content-Type":"application/json"},data:r}).done((function(e){alert("Success granting users: "+JSON.stringify(e))})).fail((function(e){alert("Failed to grant users: "+JSON.stringify(k)+" for project: "+t+" err: "+JSON.stringify(e))}))};for(c.s();!(i=c.n()).done;)s()}catch(p){c.e(p)}finally{c.f()}}))})).fail((function(e){alert("OAuth failed with err: "+JSON.stringify(e))})));case 1:case"end":return e.stop()}}),e)}))),a.state={peoplethumbnails:[],projects:[]},a}return Object(f.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("body",{className:"App-header",children:[Object(x.jsxs)("div",{style:{align:"left"},children:[Object(x.jsx)("img",{src:v,alt:"logo",width:"293.88888888888",height:"46"})," Add People to Project Tool (",Object(x.jsx)("i",{children:"invite only"}),")"]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{}),"All People:",Object(x.jsx)("div",{children:Object(x.jsx)(O.a,{images:this.state.peoplethumbnails,onClickThumbnail:C})})]}),Object(x.jsx)("p",{}),Object(x.jsxs)("div",{children:["All Projects:",Object(x.jsx)("div",{children:Object(x.jsx)(y.a,{id:"projectselector",options:this.state.projects,isMulti:!0,onChange:J,styles:P})})]}),Object(x.jsx)("p",{}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:this.putPeopleToProject,style:{fontSize:"48px",height:"80px",width:"65%",backgroundColor:"#808080",color:"#ffffff"},children:"Add People to Projects"})}),Object(x.jsx)("p",{}),Object(x.jsx)("p",{})]})})}}]),n}(o.a.Component),F=N,T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),i(e),r(e)}))};r.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(F,{})}),document.getElementById("root")),T()},49:function(e,t,n){},51:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.378df0fb.chunk.js.map